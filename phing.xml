<?xml version="1.0" ?>
<project name="myProjectPhing" basedir="." default="help">

    <!-- DOCUMENTATION : https://www.phing.info/phing/guide/en/output/chunkhtml -->
    <!-- IMPORT PROPERTY FILE -->
    <property file="settings.ini"/>

    <!-- LIST AVAILABLE TARGETS -->
    <target name="help" description="List available targets">
        <exec executable="vendor/bin/phing"
              passthru="true">
            <arg value="-l"/>
        </exec>
    </target>

    <target name="sub-setup-config" description="Replace token property by its value">
        <loadfile property="file.config" file="${absfilename}">
            <filterchain>
                <replaceregexp>
                    <regexp pattern="@(.[^@]*)@" replace="${\1}"/>
                </replaceregexp>
            </filterchain>
        </loadfile>
        <echo message="${file.config}" file="config/local/${filename}"/>
    </target>

    <target name="setup-config" description="Browse all files with pattern *.php">
        <mkdir dir="config/local" />
        <foreach param="filename" absparam="absfilename" target="sub-setup-config">
            <fileset dir="config">
                <include name="*.php" />
            </fileset>
        </foreach>
    </target>

</project>